<import src="../template/goods-item/goods-item-template.wxml" />


<!--右滑的教程指示，每次打开小程序，首次进入该页都会进行指引-->
<view class="hide{{tutorial?'show':''}}" bindtouchstart="closeTutorial">
  <!--遮罩层  -->
  <view class="shade">
    <image class="finger" src="/images/icons/finger.png" ></image>
  </view>
</view>

<!--教程之外的内容(侧边栏和视图)-->
<view>
  <!--侧边栏-->
  <view class="school_select_area {{open ? 'on' : ''}}">
    <view class="school_select_content">
      <block wx:for="{{goods_category}}" wx:key="index">
        <view class="campus" bindtap="selectGoodsCat" data-name="{{item}}" wx:if="{{open}}">
          <text>{{item}}</text>
        </view>
      </block>
    </view>
  </view>

  <!--整个页面-->
  <view bindtouchmove="tapDrag" bindtouchend="tapEnd" bindtouchstart="tapStart"
        class="all_container {{open ? 'fold' : ''}}">
    <loading hidden="{{loadingHidden}}">加载中，请稍候..</loading>
    
    <import src="../template/floating-ball/floating-ball-template.wxml"></import>
    <template is="floating-ball" data="{{business_type}}"></template>
<!--    &lt;!&ndash;悬浮球&ndash;&gt;-->
<!--    <view class="ball {{business_type? '': 'ball-extra'}}" catch:touchstart="businessTypeClick">-->
<!--      <view class="business_type">-->
<!--        {{business_type? '寻': '失'}}-->
<!--      </view>-->
<!--    </view>-->

    <form bindsubmit="formSubmit">
      <view class="search_container">
        <block wx:for="{{items}}" wx:key="index">
          <view class="search_box">
            <icon type="search" class='{{iem.icons}}' wx:if="{{item.icons}}" size='15' style="margin-left:5rpx;"
                  color="#f7931e"></icon>
            <input name="{{item.name}}" class='search_text_box' type="text" placeholder="{{item.placeholder}}"
                   placeholder-style='color:#f7931e;' bindinput="{{item.act}}"></input>
          </view>
        </block>
        <button class="search_button" form-type="submit">搜索</button>
      </view>
    </form>
    <!--轮播图-->
    <view class="swiper-container">
      <swiper class="swiper_box" autoplay="true" interval="3000" duration="1000" indicator-dots="{{false}}"
              circular="{{false}}">
        <block wx:for="{{banners}}" wx:key="index">
          <swiper-item>
            <image bindtap="previewImage" data-index="{{index}}" src="{{item}}" class="slide-image" width="750rpx"
                   height="562.5rpx" mode="aspectFill"/>
          </swiper-item>
        </block>
      </swiper>
    </view>
    <!--分类展示-->
    <view class="type-container {{tabFixed ? 'fixed-tab' : ''}}">
      <scroll-view class="type-navbar" scroll-x="true">
        <view class="type-box" wx:for="{{categories}}" wx:for-item="cat" wx:key="index">
          <view id="{{cat.id}}" class="type-navbar-item {{activeCategoryId == cat.id ? 'type-item-on' : ''}}"
                bindtap="catClick">
            {{cat.name}}
          </view>
        </view>
      </scroll-view>
    </view>
    <view class="message_container">
      <block wx:for="{{goods_list}}" wx:key="index">
        <view class="goods_message">
          <template is="goodsItem" data="{{...item}}"/>
        </view>
      </block>
    </view>

    <view wx:if="{{!loadingMoreHidden}}" class="no-more-goods">没有更多物品了~可以去发布</view>
    <view wx:if="{{loadingMoreHidden}}" class="no-more-goods">上滑加载更多～</view>

  </view>
</view>


